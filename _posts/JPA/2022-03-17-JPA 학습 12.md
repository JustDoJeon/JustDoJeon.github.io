---
layout : single
title:  "[JPA] ì§€ì—°ë¡œë”©ê³¼ ì¦‰ì‹œë¡œë”©   "
categories: JPA
tags:
  - [JPA]

toc: true
toc_sticky: true
 
date: '2022-03-17 00:00:00 +0900'

---


<br>

#### ì§€ì—°ë¡œë”©

![ì§€ì—°ë¡œë”©1](https://user-images.githubusercontent.com/52389219/158741864-977ff525-8286-48d2-b825-fe3bca194a25.PNG)


> fetch = FetchType.LAZY ë¥¼ í†µí•´ í˜¸ì¶œì‹œ í”„ë¡ì‹œì—ì„œ ê°€ì ¸ì˜¨ë‹¤.

> ì§€ì—°ë¡œë”© LAZYì„ ì‚¬ìš©í•´ì„œ í”„ë¡ì‹œë¡œ ì¡°íšŒ 
```java
@Entity
public classs Member { 
  @Id
  @GeneratedValue
  private Long id;
  
  @Column(name = "USERNAME")
  private String name;

  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name="TEAM_ID")
  private Team team;

}
```

<br>

![ì§€ì—°ë¡œë”©2](https://user-images.githubusercontent.com/52389219/158741880-5e05595c-b632-45bd-855a-b7b7f633cb6a.PNG)

```java
Member member = em.find(Member.class, 1L); // ì´ ë¶€ë¶„ì—ì„œ TEAMì„ ê°€ì ¸ì˜¤ì§€ì•ŠìŒ ì§€ì—°ë¡œë”©ìœ¼ë¡œì¸í•´
 Team team = member.getTeam();
 team.getName(); //ì‹¤ì œ teamì„ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— ì´ˆê¸°í™” (DBì¡°íšŒ) í•˜ëŠ”ê²ƒ!!!
```

#### ì¦‰ì‹œë¡œë”©
![ì¦‰ì‹œë¡œë”©1](https://user-images.githubusercontent.com/52389219/158741867-94e132a0-4676-4908-badf-6945524ab4f9.PNG)


<BR>

```JAVA
@Entity
public classs Member { 
  @Id
  @GeneratedValue
  private Long id;
  
  @Column(name = "USERNAME")
  private String name;

  @ManyToOne(fetch = FetchType.EAGER)
  @JoinColumn(name="TEAM_ID")
  private Team team;
}
```
> - ì¦‰ì‹œë¡œë”©(EAGER), Member ì¡°íšŒì‹œ í•­ìƒ TEAMë„ ì¡°íšŒí•œë‹¤.
> - JPA êµ¬í˜„ì²´ëŠ” ê°€ëŠ¥í•˜ë©´ ì¡°ì¸ì„ ì‚¬ìš©í•´ì„œ SQL í•œë²ˆì— í•¨ê»˜ ì¡°íšŒí•œë‹¤. 

<br>


#### í”„ë¡ì‹œì™€ ì¦‰ì‹œë¡œë”© ì£¼ì˜
- ê°€ê¸‰ì  ì§€ì—°ë¡œë”©ë§Œ ì‚¬ìš©í•œë‹¤. ( ì‹¤ë¬´ì—ì„œ )
- ì¦‰ì‹œ ë¡œë”©ì„ ì ìš©í•˜ë©´ ì˜ˆìƒì¹˜ ëª»í•œ SQLì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ì¦‰ì‹œ ë¡œë”©ì€ JPQLì—ì„œ N+1 ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ë‹¤.
- @ManyToOne, @OneToOneì€ ê¸°ë³¸ì´ ì¦‰ì‹œ ë¡œë”© - > LAZYë¡œ ì„¤ì •í•´ì•¼í•œë‹¤.
- @OneToMany, @ManyToManyëŠ” ê¸°ë³¸ì´ ì§€ì—°ë¡œë”©ì´ë‹¤.

<br>

#### ì§€ì—°ë¡œë”©ì˜ í™œìš©

![ì§€ì—°ë¡œë”©3](https://user-images.githubusercontent.com/52389219/158741869-e58666c2-9328-4dda-a913-34d73d7d6cf9.PNG)


- Memberì™€ Teamì´ ìì£¼ í•¨ê»˜ ì‚¬ìš©ëœë‹¤ - > ì¦‰ì‹œë¡œë”©
- Memberì™€ OrderëŠ” ê°€ë” ì‚¬ìš© - > ì§€ì—°ë¡œë”©
- Orderì™€ ProductëŠ” ìì£¼ í•¨ê»˜ ì‚¬ìš© -> ì¦‰ì‹œë¡œë”©

<br>

> í•´ë‹¹ êµ¬ì„±1 

![ì§€ì—°ë¡œë”©4](https://user-images.githubusercontent.com/52389219/158741873-b1086c06-d96b-4040-a121-f66f15bc6bc3.PNG)


<br>

> í•´ë‹¹ êµ¬ì„± 2

![ì§€ì—°ë¡œë”©5](https://user-images.githubusercontent.com/52389219/158741884-e498f34c-8f3f-4b5f-80e1-b423a54230db.PNG)


<br>

> ì‹¤ë¬´ ì£¼ì˜ì 
- ëª¨ë“  ì—°ê´€ê´€ê³„ì— ëŒ€í•´ ì§€ì—° ë¡œë”©ì„ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤.
- ì‹¤ë¬´ì—ì„œ ì¦‰ì‹œë¡œë”©ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì•¼í•œë‹¤.
- JQP fetch ì¡°ì¸ì´ë‚˜, ì—”í‹°í‹° ê·¸ë˜í”„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.


<br>

ğŸ˜„ ì°¸ê³  : ì¸í”„ëŸ° ê¹€ì˜í•œë‹˜ì˜ JPA ê¸°ë³¸ ê°•ì˜ ë° êµì¬  
<br>

ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„
<br>

**ê°œì¸ë©”ëª¨** 
